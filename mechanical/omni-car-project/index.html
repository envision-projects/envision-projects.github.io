<!doctype html><html lang=en class=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=manifest href=/favicons/site.webmanifest><link rel=mask-icon href=/favicons/safari-pinned-tab.svg color=#004750><link rel="shortcut icon" href=/favicons/favicon.ico><meta name=msapplication-config content="/favicons/browserconfig.xml"><title>Omni Car Project | Envision Certification</title><meta property="og:title" content="Omni Car Project"><meta property="og:description" content="A cute tank drive car suitable for drifting"><meta property="og:type" content="article"><meta property="og:url" content="/mechanical/omni-car-project/"><meta property="article:section" content="mechanical"><meta property="article:published_time" content="2022-07-20T00:15:38+00:00"><meta property="article:modified_time" content="2022-08-17T12:07:43-07:00"><meta itemprop=name content="Omni Car Project"><meta itemprop=description content="A cute tank drive car suitable for drifting"><meta itemprop=datePublished content="2022-07-20T00:15:38+00:00"><meta itemprop=dateModified content="2022-08-17T12:07:43-07:00"><meta itemprop=wordCount content="1982"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Omni Car Project"><meta name=twitter:description content="A cute tank drive car suitable for drifting"><link rel=stylesheet href=/css/styles.31d755ced7815e4cb133ba9d4550bb259d5a632858d8bf6974c3d25b1b8d6f4625ff81f01d2d65e18c7faf1c5a20433cff45b8f7de5b20758db3dcbd8f42dcdc.css integrity="sha512-MddVzteBXkyxM7qdRVC7JZ1aYyhY2L9pdMPSWxuNb0Yl/4HwHS1l4Yx/rxxaIEM8/0W4995bIHWNs9y9j0Lc3A=="><link rel=stylesheet href=css/style><meta name=description content="A cute tank drive car suitable for drifting"></head><body class=page-page id=pagetop><header class=nav_header><nav class="wrap nav menu"><a href=/ class=nav_brand><picture data-lit=/images/envision-dark.png data-dark=/images/envision-light.png><source srcset=/images/envision-light.png media="(prefers-color-scheme: dark)"><img srcset=/images/envision-dark.png alt='Envision Certification Logo'></picture>
<label class="nav_toggle toggle" title='Site Menu' role=button><svg class="icon icon_harmburger"><use xlink:href="#harmburger"/></svg></label></a><ul class=nav_body><li class=nav-item><div class=search><label for=find class=search_label><svg class="icon icon_search"><use xlink:href="#search"/></svg></label><input type=search class=search_field placeholder='Search mechanical' id=find autocomplete=off data-scope=mechanical><div class="search_results results"></div></div></li><li class=nav-item><a class=nav-link href=/mechanical/><span>Mechanical</span></a></li><li class=nav-item><a class=nav-link href=/electrical/><span>Electrical</span></a></li><li class=nav-item><a class=nav-link href=/embedded/><span>Embedded</span></a></li><li class=nav-item><a class=nav-link href=/tutorials/><span>Tutorials</span></a></li><li class=nav-item><a class=nav-link href=https://jacobsschool.ucsd.edu/envision/><span>Home</span></a></li><li class="nav-item nav_repo"><a class=nav-link href=https://github.com/envision-projects target=_blank><picture data-lit=/images/GitHubMarkLight.svg data-dark=/images/GitHubMarkDark.svg><source srcset=/images/GitHubMarkDark.svg media="(prefers-color-scheme: dark)"><img srcset=/images/GitHubMarkLight.svg alt='GitHub Repo'></picture></a></li><li class=nav-item><div class=color_mode><label for=mode></label>
<input type=checkbox class=color_choice id=mode title="Toggle Dark Mode"></div></li></ul></nav></header><div class="main wrap pt-4"><div class=grid-auto><aside class="aside menu"><div><label class="aside_toggle toggle" title='Docs Menu' role=button>Docs Menu<svg class="icon icon_harmburger"><use xlink:href="#harmburger"/></svg></label></div><section class="section aside_inner"><h2 class=section_title><a href=/mechanical/ class=group>Mechanical Design and Prototyping Certification</a></h2><section id=docs-mechanical-design-and-prototyping-certification><h3 class=section_link><a id=docs-double-action-out-the-front-comb href=/mechanical/double-action-out-the-front-comb/>Double Action Out the Front Comb</a></h3><nav id=TableOfContents></nav><h3 class=section_link><a id=docs-project-l0ckcr4ck3r href=/mechanical/project-l0ckcr4ck3r/>Project l0ckcr4ck3r</a></h3><nav id=TableOfContents><ul><li><a href=#specifications>Specifications</a></li></ul><ul><li><a href=#pcb>PCB</a></li><li><a href=#cad>CAD</a></li><li><a href=#code>Code</a></li></ul><ul><li><a href=#mechanical>Mechanical</a></li><li><a href=#electrical>Electrical</a></li></ul><ul><li><a href=#motor---lock-dial>Motor -> Lock Dial</a></li><li><a href=#motor-encoder>Motor Encoder</a></li><li><a href=#shackle-puller>Shackle puller</a></li><li><a href=#electronics>Electronics</a></li></ul><ul><li><a href=#testing-the-stepper-motor--magnetic-encoder>Testing the stepper motor / magnetic encoder</a></li><li><a href=#testing-the-servo>Testing the servo</a></li></ul><ul><li><a href=#servo-values>Servo values</a></li><li><a href=#calibrating-magnet-offset>Calibrating magnet offset</a></li><li><a href=#checking-readlockdial>Checking readLockDial()</a></li><li><a href=#lock---motor-coupler>Lock -> Motor coupler</a></li></ul></nav><h3 class=section_link><a id=docs-walking-robot href=/mechanical/walking-robot/>Walking Robot</a></h3><nav id=TableOfContents><ul><li><a href=#brief-on-4-bar-linkages>Brief on 4-bar Linkages</a></li><li><a href=#design-a-chassis>Design a Chassis</a></li><li><a href=#design-the-links>Design the Links</a></li><li><a href=#create-a-motion-study-in-solidworks>Create a Motion Study in SolidWorks</a></li><li><a href=#putting-it-all-together>P﻿utting it all together</a></li></ul></nav><h3 class=section_link><a id=docs-obstacle-avoidance-robot href=/mechanical/obstacle-avoidance-robot/>Obstacle Avoidance Robot</a></h3><nav id=TableOfContents><ul><li><a href=#description>Description:</a></li><li><a href=#components-used>Components Used:</a></li><li><a href=#process>Process:</a></li><li><a href=#designing-the-chassis-in-solidworks>Designing the chassis in SolidWorks:</a></li><li><a href=#arduino-and-adafruit-motor-shield>Arduino and Adafruit Motor Shield:</a></li><li><a href=#driving-the-motors>Driving the Motors</a></li><li><a href=#ultrasonic-sensor>Ultrasonic Sensor</a></li><li><a href=#sweep-function>Sweep Function</a></li><li><a href=#sweep-function-test>Sweep Function Test</a></li><li><a href=#putting-it-all-together>Putting it All Together</a></li></ul></nav><h3 class="section_link active"><a id=docs-omni-car-project href=/mechanical/omni-car-project/>Omni Car Project</a></h3><nav id=TableOfContents><ul><li><a href=#challenges>Challenges</a><ul><li><a href=#cad>CAD</a></li><li><a href=#electronics>Electronics</a></li><li><a href=#code>Code</a></li></ul></li></ul><ul><li><a href=#bushing>Bushing</a></li><li><a href=#through-hole>Through Hole</a></li><li><a href=#tap-hole>Tap Hole</a></li><li><a href=#tolerance>Tolerance</a></li><li><a href=#gears>Gears</a><ul><li><a href=#gear-types>Gear Types</a></li><li><a href=#spur-gear>Spur Gear</a></li><li><a href=#helical-gears>Helical Gears</a></li><li><a href=#herringbone-gears>Herringbone Gears</a></li><li><a href=#pitch-diameter>Pitch diameter</a></li></ul></li><li><a href=#layout-sketch>Layout sketch</a></li></ul><ul><li><a href=#onshape-file--gear-setup>Onshape File & Gear Setup</a></li><li><a href=#roadmap>Roadmap</a></li><li><a href=#creating-the-motor-pinion-gear>Creating the Motor Pinion Gear</a></li><li><a href=#creating-the-wheel-gear>Creating the Wheel Gear</a></li><li><a href=#creating-the-gearbox-plate>Creating the Gearbox Plate</a><ul><li><a href=#layout-sketch-making>Layout sketch making</a></li><li><a href=#referencing-pitch-diameters>Referencing pitch diameters</a></li></ul></li><li><a href=#cad-assembly>CAD Assembly</a></li></ul><ul><li><a href=#i-bus>I bus</a></li><li><a href=#wiring>Wiring</a></li><li><a href=#pairing-the-receiver-and-transmitter>Pairing the receiver and transmitter</a><ul><li><a href=#steps-for-pairing>Steps for pairing</a></li></ul></li></ul><ul><li><a href=#install-the-i-bus-communication-library>Install the I-Bus communication library</a></li><li><a href=#uploading-the-actual-code>Uploading the actual code</a></li></ul></nav></section></section></aside><main class=content><h1>Omni Car Project</h1><h1 id=about-omni-car-project>About Omni Car Project</h1><p><img src=/images/omnicar/2022-07-24-23-11-20-image.png alt=image></p><p>By: MingWei Yeoh</p><p><img src=/images/omnicar/2022-07-23-12-29-43-robotcar.gif alt=image></p><p>It's a tank driven car with omni wheels for some sick drifting without the fear of shredding the floor! Combined with a responsive FLYSKY Drone Transmitter, this makes for a fun project!</p><h2 id=challenges>Challenges</h2><h3 id=cad>CAD</h3><p><img src=https://seekvectorlogo.com/wp-content/uploads/2022/02/onshape-vector-logo-2022.png alt="Onshape Vector Logo  Free Download  SVG  PNG format   SeekVectorLogoCom"></p><p>The main gripe with the included motors in the kit is that they are a little slow. Thus we will be making a <strong>custom 1:2 speed gearbox</strong> with OnShape in order to speed up the drive wheels!</p><p><img src=/images/omnicar/2022-07-23-12-35-02-Gearbox.gif alt=image></p><p><a href="https://cad.onshape.com/documents/2a7f4b08169f040265235880/w/c5c7e57ba2de3b115485b33c/e/ef8e0e6003989cb6d29842b7?renderMode=0&uiState=62ddffa3c7666d2b45aa2f62">Answer Key Onshape Files</a>
<a href="https://cad.onshape.com/documents/30ea8b3deb0b2951b3a9324d/w/0cbcffa2c3bcbcb2279b8d0f/e/87097186b0e86bcb26d61ab0?renderMode=0&uiState=62de03ed7d3ab54cc104de80">Student copy of Onshape Files</a></p><h3 id=electronics>Electronics</h3><p><img src=/images/omnicar/2022-07-24-19-22-37-image.png alt=image></p><p>Electronics aren't that complicated. We use 3 wires to wire the drone receiver to the Arduino Mega and wire up all the motors to the Adafruit Motor shield. Some basic soldering of the header pins onto the Motor Shield is required.</p><h3 id=code>Code</h3><p>If not already, you should have a way to upload code to an Arduino (Arduino IDE, or Platform IO).</p><p>Install <a href=https://docs.arduino.cc/software/ide-v2>Arduino IDE</a></p><p>Otherwise, the code is extremely basic and can be found in the omniwheelcar.ino file.</p><h1 id=materials>Materials</h1><ul><li>1.5" [Omni Wheels](<a href="https://ozrobotics.com/shop/38mm-1-5-inches-double-plastic-omni-wheel-with-8-pu-rollers-the-smallest-omni-wheel-14184/?gclid=Cj0KCQjwuO6WBhDLARIsAIdeyDKZsAJRbve_n7XOvtvnNeYBl4DtJMTloGh_OklkEDbuxJY_HlO5m5IaAm7hEALw_wcB">38mm (1.5 inches) Double Plastic Omni Wheel with 8 PU Rollers – The Smallest Omni Wheel – 14184 – Oz Robotics</a>)</li><li><a href=http://www.dagurobot.com/DG012-BV>DAGU Robot</a></li><li>[Adafruit motor Driver Shield](<a href="https://www.jameco.com/z/1438-Adafruit-Industries-Adafruit-Motor-Stepper-Servo-Shield-for-Arduino-Kit-v2-3_2193651.html?CID=GOOG&gclid=Cj0KCQjwuO6WBhDLARIsAIdeyDIM6RLzXcTHU6YzXxPacGYE7HdH5P8kUolKOkncQIB1xLzhVvg549waAixxEALw_wcB">Motor Stepper Servo Shield 1438 Adafruit Industries | Jameco</a>)</li><li><a href="https://www.amazon.com/dp/B01H4ZDYCE/ref=twister_B091DSB8HY?_encoding=UTF8&psc=1">Arduino Mega</a></li><li><a href="https://www.amazon.com/Transmitter-Controller-Receiver-Helicopter-Quadcopter/dp/B07Z9YNP7S/ref=sr_1_3_sspa?crid=22XSBST19C0DK&keywords=flysky+receiver&qid=1658602756&sprefix=flysky+receiver%2Caps%2C136&sr=8-3-spons&psc=1&smid=A27Y3358ST3KOY&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExQjc0MzhVQUJYMjBNJmVuY3J5cHRlZElkPUEwMDI3NTY1MzdBN0M4N1RSRFhFMCZlbmNyeXB0ZWRBZElkPUEwMjYyNzAxMzBOTks4R0RBVzBLViZ3aWRnZXROYW1lPXNwX2F0ZiZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU=">FLYSKY Transmitter & Reciever</a></li><li><a href="https://www.amazon.com/100Pcs-Stainless-Self-Lock-Inserted-Clinching/dp/B075ZZW7VL/ref=sr_1_3?crid=3GPHXEXC6OMTA&keywords=m3+locknuts&qid=1658603323&sprefix=m3+lock+nut%2Caps%2C142&sr=8-3">M3 Lock Nuts</a></li><li><a href="https://www.amazon.com/uxcell-50Pcs-Socket-Screws-Headless/dp/B01N76NKU6/ref=sr_1_11?crid=MTNXL2QJU032&keywords=m4+grub+screw+black&qid=1658603365&sprefix=m4+grub+screw+blac%2Caps%2C119&sr=8-11">M4 Grub Screws</a></li><li>[M3 Hobby Park Bushings](<a href="https://www.ebay.com/itm/232912178821?_trkparms=amclksrc%3DITM%26aid%3D111001%26algo%3DREC.SEED%26ao%3D1%26asc%3D20160908105057%26meid%3D7fbbb6b6af374b59be0eed56975e28ac%26pid%3D100675%26rk%3D1%26rkt%3D15%26sd%3D232912178821%26itm%3D232912178821%26pmt%3D1%26noa%3D1%26pg%3D2380057%26brand%3DRedcat+Racing&_trksid=p2380057.c100675.m4236&_trkparms=pageci%3A8a3100ac-0abc-11ed-b9b9-ca517b2aaa65%7Cparentrq%3A2c8131cd1820a60c03759435ffe81b36%7Ciid%3A1">Redcat Racing 02101 C-hub Bushings King Pin Bushings 12pcs 02101 609132454745 | eBay</a>)</li><li>Assorted M3 Bolts</li></ul><h1 id=getting-familiarized-with-mae-terms>Getting Familiarized with MAE Terms</h1><h2 id=bushing>Bushing</h2><p><img src=/images/omnicar/2022-07-24-19-43-36-bushing.gif alt=image></p><p>For spinning objects, it is good practice to use a bushing (Which is basically a cheap bearing) instead of simply spinning an object on a bolt. They are typically made of a low friction material like bronze.</p><p><img src=/images/omnicar/2022-07-24-19-45-35-image.png alt=image></p><h2 id=through-hole>Through Hole</h2><p><img src=/images/omnicar/2022-07-24-19-50-43-throughhole.gif alt=image></p><p>Hole that is meant for a bolt to pass through without interference. I usually use a value = (OD of bolt)" + 1/32"</p><h2 id=tap-hole>Tap Hole</h2><p><img src=/images/omnicar/2022-07-24-19-50-04-taphole.gif alt=image></p><p>Hole that is meant for a bolt to thread through it and essentially act like a nut (but without a nut, they're really convenient). It is important to understand that you can only use this with <strong>3D Printing</strong> as the plastic will form it's own threads naturally. The pullout force is quite strong but it does not take much torque to strip the threads so you must be carefull of overtightening.</p><p>I use a value of (OD of a bolt)" - 1/64"</p><h2 id=tolerance>Tolerance</h2><p><img src=/images/omnicar/2022-07-24-22-54-55-image.png alt=image></p><p>Anything that we 3D Printing to fit around something "snuggly" must have a little bit of tolerance on it. If we make a hole exactly the size of the motor shaft, it will probably not fit and be <strong>WAAAY</strong> too tight, therefore we add a little bit <strong>extra</strong> called Tolerance.</p><p>There is quite an easy way to achieve this.</p><ol><li>Copy over the geometry of the Motor Shaft (<strong>MS</strong>).</li><li>Click on all of the lines and select "Construction" (Or press q on keyboard to toggle)</li><li>Click on the offset button and offset it by 1/128" This new line will be the <strong>Actual geometry</strong> that you use to fix the part around the motor shaft. (This value works for my 3D printeres but your results may vary)</li></ol><h2 id=gears>Gears</h2><h3 id=gear-types>Gear Types</h3><p>There are different types of gears that we can 3D Print!</p><p><img src=/images/omnicar/2022-07-24-21-02-34-image.png alt=image></p><p><strong>Spur Gear</strong> (Left)</p><p><strong>Helical Gear</strong> (Middle)</p><p><strong>Herringbone Gear</strong> (Right)</p><h3 id=spur-gear>Spur Gear</h3><p>You are probably most used to the gear on the left, that's because they are easy to make and generally the least pain in the ass to use.</p><p>Some disadvantages of them include that you have to constrain the gears in the axial direction. They can slide off each other unless you prevent that from happening with another part. They also make anonying noises because there is not a consistent mating between the two faces that happen.</p><h3 id=helical-gears>Helical Gears</h3><p>These fix the inconsistent mating problem with spur gears but because they are angled, they introduce their own problem of the gears themself wanting to push each other off of the axle. They create their own axial force lol. Cars use helical gears in their gearbox.</p><h3 id=herringbone-gears>Herringbone Gears</h3><p>They are the best gears because of their coolness. They are basically helical gears mirrored against each other to form a herringbone gears. The axial force formed by the angled teeth cancel each other, which therefore makes no axial load. Additionally, they are self-aligning, they will literally "snap" into place and hold themself from sliding off one another.</p><p>You probably have never seen these gears in the real world because they are really hard to produce and most of the time you can get away with just a spur gear. 3D printers are like the only machine that can produce herringbone gears so you better take advantage of these cool things.</p><h3 id=pitch-diameter>Pitch diameter</h3><p>The Pitch Diameter tells the mating distance for the gear and is crucial when you're making a gearbox. Like how else would you know the distance to where you should put the other end of the shaft??</p><h2 id=layout-sketch>Layout sketch</h2><p><img src=/images/omnicar/2022-07-24-21-00-45-image.png alt=image></p><p>This will be the most important when making the Gearbox plate. This will allow us to let **CAD **find out the positions <strong>FOR US</strong> for all of our axles. In my layout sketch example:</p><ul><li>The Pitch Diameters (<strong>PD</strong>) of both of the gears have a tangent relation to each other.</li><li>I have drawn the <strong>wheel</strong> coaxially with it's respective gear to allow me to dimension how much ground clearance I want to have between the bottom of the Motor Pinion gear and the ground (<strong>Brown exclamation mark</strong>)</li></ul><h1 id=cad-design>CAD design</h1><h2 id=onshape-file--gear-setup>Onshape File & Gear Setup</h2><ol><li>Make a copy of <a href="https://cad.onshape.com/documents/30ea8b3deb0b2951b3a9324d/w/0cbcffa2c3bcbcb2279b8d0f/e/87097186b0e86bcb26d61ab0?renderMode=0&uiState=62de03ed7d3ab54cc104de80">Student copy of Onshape Files</a></li><li>Open the file and click on the "+" button in the top-right corner to add a custom feature</li><li>Under "public" search for "Advanced Gear"</li><li>Add that featurescript to your toolbar</li></ol><h2 id=roadmap>Roadmap</h2><p>We will need to create 3 parts specifically in this order:</p><ul><li><strong>Motor Pinion Gear</strong><ul><li>Will have Gear Teeth and a form of coupler to the shaft of the motor</li></ul></li><li><strong>Wheel Gear</strong><ul><li>Have Gear Teeth and a form of coupler to the hub of the 1/5" Omni Wheel</li><li>Needs to have 1/2 the number of Gear Teeth that the Motor Pinion Gear has</li></ul></li><li><strong>Gearbox Plate</strong><ul><li>This will hold attach the gear on the wheel to the chassis of the robot and most importantly will ensure a correct amount of spacing between the gears</li></ul></li></ul><h2 id=creating-the-motor-pinion-gear>Creating the Motor Pinion Gear</h2><ol><li>Creat new Part Studio</li><li>Click on Advanced Gear in the top-right corner (The plugin you should've installed)</li><li>On the window that pops up, change from "Module" to "Diametrical Pitch"</li></ol><p><img src=/images/omnicar/2022-07-24-22-41-19-image.png alt=image></p><ol start=4><li>Set the Number of gear teeth to 24</li><li>Set the Diametrical pitch to 25<ul><li>Pitch Diameter = Number of Teeth / Diametrical Pitch</li><li>Diametrical Pitch relates to the density and size of the gear teeth</li></ul></li><li>Change the type from "Spur" to Herringbone</li><li>Set Pressure Angle to 30 ( Just some number that I found that works well for 3D Printing)</li><li>Set Extrude Depth to 0.25"</li><li>Hit the check box.</li></ol><p>Now it's up to you to attach this gear to the motor shaft!</p><div class=tip>Make sure to reference the reference motor in the part studio. It is under one of the tabs at the bottom of the screen. Reference the dimensions for the motor shaft and be sure to add <strong>tolerance</strong>!</div><div class=tip>In order to "secure" the gear pinion to the motor you should use a grub screw! Simply make a tap hole that goes straight into the shaft</div><p><img src=/images/omnicar/2022-07-24-23-08-29-image.png alt=image></p><h2 id=creating-the-wheel-gear>Creating the Wheel Gear</h2><p>First we need to understand how this is all going to go together.</p><p><img src=/images/omnicar/2022-07-27-10-25-45-image.png alt=image></p><p>The part that we're going to make must have room for the **bushing **on the end of it and also fit inside of our <strong>omni wheel</strong>.</p><p>The idea is that the wheel spins on a long bolt. A lock nut on the end of our wheel-gear assembly keeps everything tight and the entire bolt threads into the gearbox plate that we will make next.</p><ol><li>Create a new part studio</li><li>Make a new gear with:</li></ol><ul><li>The Half the number of teeth as the first gear</li><li>The <strong>SAME DIAMERTICAL PITCH</strong> (for some reason the DP changes whenever you change the teeth number, so just be aware of that)</li><li>The same type of gear as the first one (herringbone, spur, or helical whatever you choose)</li><li>0.25" thick</li><li>30 degree Pressure Angle</li></ul><ol start=3><li>Add a coupling method to the Omni Wheel. With enough spacing so that the gear teeth are not in contact with the wheel</li></ol><p><img src=/images/omnicar/Pasted%20image%2020220728153145.png alt=image></p><ol start=4><li>Through hole for the bushing to fit into</li></ol><h2 id=creating-the-gearbox-plate>Creating the Gearbox Plate</h2><p>This plate attaches the wheel axle to the chassis assembly. We will use the mounting holes on the gearbox as an easy way to attach the plate.</p><h3 id=layout-sketch-making>Layout sketch making</h3><ol><li>Switch to the DAGU DGO2S Motor Gearbox tab. We will make our part directly on the gearbox since we will be referencing items on the gearbox.</li><li>Create a new sketch on the face of the motor</li><li>Project the gearbox holes onto the current sketch. Turn the holes into construction lines</li></ol><p><img src=/images/omnicar/2022-07-27-10-38-33-image.png alt=image></p><ol start=4><li>Rename your sketch to be titled "Layout Sketch"</li><li>Close out the sketch.</li></ol><h3 id=referencing-pitch-diameters>Referencing pitch diameters</h3><p>Have you noticed the faint sketch line on the gearbox gears? If you don't notice it you may have the gear feature hidden.</p><p><img src=/images/omnicar/2022-07-27-10-41-33-image.png alt=image></p><p><img src=/images/omnicar/2022-07-27-10-41-33-image.png alt=image></p><p>The circle is telling you the <strong>pitch diameter</strong> for your gears. Take note of both of the pitch diameters for your motor pinion and the wheel gear</p><ol><li>Go back to the gearbox tab and edit the layout sketch</li><li>Add in the construction circles and dimension them so that they represent the pitch diameters of your gears</li></ol><p><img src=/images/omnicar/2022-07-27-10-43-47-image.png alt=image></p><ol start=3><li>Add in a circle that represents the wheel (1.5" in diameter)</li></ol><p><img src=/images/omnicar/2022-07-27-10-45-48-image.png alt=image></p><ol start=4><li>Add in another dimenion that ensures the robot with have 1/4" of ground clearance from the lowest hanging object!</li></ol><p><img src=/images/omnicar/2022-07-27-10-46-59-image.png alt=image></p><ol start=5><li>Exit the sketch and create a new sketch ontop of the layout sketch</li><li>Construct through holes for the motor gearbox and a tap hole for the wheel gear assembly.</li></ol><p><img src=/images/omnicar/2022-07-27-11-14-33-image%201.png alt=image></p><ol start=7><li>Add a clearance hole for the motor pinion gear's coupling method</li></ol><p><img src=/images/omnicar/2022-07-27-11-31-20-image%201.png alt=image></p><ol start=8><li>Now construct the gearbox plate around the three holes whilst avoiding the clearance hole!</li></ol><p><img src=/images/omnicar/2022-07-27-11-32-11-image.png alt=image></p><h2 id=cad-assembly>CAD Assembly</h2><p>Now put all the components in an assembly and ensure that there are no weird interferences</p><p><img src=/images/omnicar/2022-07-27-11-34-57-image.png alt=image></p><h1 id=putting-the-robot-together>Putting the robot together</h1><p>Now print all the parts and put the robot together!!</p><h1 id=electrical-wiring>Electrical wiring</h1><h2 id=i-bus>I bus</h2><p>For this project we will be using a certain protocol called I-Bus in order to remotely control our omni car. It is essentially just UART communication. The great thing about it is that it only requires one signal wire to our Arduino and we are able to get data from 10 different channels on our controller! It is extremely easy to use and gives us very fast data with minimal lag.</p><p>The I Bus pin on the receiver is circled below. (It took me some time to figure out the right one the first time I was doing this lol)</p><p><img src=/images/Pasted%20image%20220730112302.png alt=image></p><h2 id=wiring>Wiring</h2><p>Wiring the robot in accordance to this fritzing diagram. I reccomend using double sticky tape to mount the electronics.</p><p>(Triple A batteries should actually be double A batteries as they have more capacity)</p><p><img src=/images/omnicar/2022-07-24-19-22-37-image.png alt=image></p><div class="tip tip_warning"><blockquote><p>Since these are DC motors, you may need to flip the red and black connections if they are spinning the wrong way.</p></blockquote></div><h2 id=pairing-the-receiver-and-transmitter>Pairing the receiver and transmitter</h2><p>If the light on the receiver is not a solid, non-blinking red color, with both the receiver and transmitter turned on, then you will need to pair it.</p><h3 id=steps-for-pairing>Steps for pairing</h3><ol><li>Turn receiver and transmitter off</li><li>Short out the BIND and VCC pin</li></ol><p><img src=/images/omnicar/Pasted%20image%2020220730115120.png alt=image></p><ol start=3><li>Turn on the receiver (The red light should be blinking really fast)</li><li>While holding the "BIND KEY" on the transmitter, turn on the transmitter</li><li>Transmitter should display something like "RX Binding Ok" and the red light on the receiver shouldn't blink</li><li>Unshort the BIND and VCC pin</li></ol><h1 id=uploading-the-code>Uploading the Code</h1><h2 id=install-the-i-bus-communication-library>Install the I-Bus communication library</h2><ol><li>Tools -> Manage libraries</li><li>Search for ibus</li><li>Install the IBusBM library</li></ol><p><img src=/images/omnicar/Pasted%20image%2020220730114831.png alt=image></p><h2 id=uploading-the-actual-code>Uploading the actual code</h2><p>Open the omnicar.ino file and upload that code to the arduino.</p><div class=pager><div class="pager_item prev"><a href=/mechanical/obstacle-avoidance-robot/ class="pager_link button" title="Obstacle Avoidance Robot" rel=prev><span class=pager_label>Obstacle Avoidance Robot</span></a></div></div></main></div></div><footer class="pt-2 pb-2"><div class=wrap><p>&copy; <span class=year>2023</span></p><a href=#pagetop id=toTop title="Back to top"></a></div></footer><svg width="0" height="0" class="hidden"><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next"><path d="M484.14 226.886 306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216.0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04.0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526.0 219.15.0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864.0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208.0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search"><path d="M508.874 478.708 360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416.0 202.666.0S0 90.917.0 202.667s90.917 202.667 202.667 202.667c48.206.0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086.0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229.0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger"><path d="M1 10C1 4.477 5.477.0 11 0h220c5.523.0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523.0 10 4.477 10 10s-4.477 10-10 10H11c-5.523.0-10-4.477-10-10zm9 69c-5.523.0-10 4.477-10 10s4.477 10 10 10h220c5.523.0 10-4.477 10-10s-4.477-10-10-10H10z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 401.998 401.998" id="sort"><path d="M73.092 164.452h255.813c4.949.0 9.233-1.807 12.848-5.424 3.613-3.616 5.427-7.898 5.427-12.847s-1.813-9.229-5.427-12.85L213.846 5.424C210.232 1.812 205.951.0 200.999.0s-9.233 1.812-12.85 5.424L60.242 133.331c-3.617 3.617-5.424 7.901-5.424 12.85.0 4.948 1.807 9.231 5.424 12.847 3.621 3.617 7.902 5.424 12.85 5.424zm255.813 73.097H73.092c-4.952.0-9.233 1.808-12.85 5.421-3.617 3.617-5.424 7.898-5.424 12.847s1.807 9.233 5.424 12.848L188.149 396.57c3.621 3.617 7.902 5.428 12.85 5.428s9.233-1.811 12.847-5.428l127.907-127.906c3.613-3.614 5.427-7.898 5.427-12.848.0-4.948-1.813-9.229-5.427-12.847-3.614-3.616-7.899-5.42-12.848-5.42z"/></symbol></svg><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="arrow"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol></svg><script src=/js/bundle.9d7bb5069dc6a516a8b0c8327101dc28c1498e5c002b1c1575033c09eed7d9f1150be9d415257d45ba24a8e2d9fc6fb3ac405d6ee98f917b2a2497469ae5b07b.js></script></body></html>